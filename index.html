<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Kamiko Loading Screen</title>
    <style>
        @font-face {
            font-family: 'ExoSemiBold';
            src: url('fonts/exo2-semibold.ttf') format('truetype');
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100vh;
            background: #000;
            font-family: 'ExoSemiBold';
        }

        #VideoContainer {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        #BackgroundVideo {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #DarkenedVideo {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            mix-blend-mode: multiply;
            background: rgba(0, 0, 0, 0.5);
            pointer-events: none;
        }

        #UpperImage {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }

        #HeaderBlock {
            position: absolute;
            top: 2.5vh;
            right: 2.5vw;
            z-index: 10;
        }

        #LogoImage {
            width: 82.5px;
            height: 132px;
            filter: drop-shadow(0 0 5px rgba(255,174,0,0.5));
            animation: GlowLogo 1.5s infinite alternate, SlideLeftLogo 1s ease-out forwards;
            opacity: 0;
        }

        #FooterBlock {
            position: absolute;
            bottom: 3vh;
            left: 2vw;
            z-index: 10;
            max-width: 40vw;
        }

        #HintTitle {
            font-size: clamp(16px,1.5vw,20px);
            color: #fff;
            margin-bottom: 1vh;
            animation: SlideRightTitle 1s ease-out forwards;
            opacity: 0;
        }

        #HintText {
            font-size: clamp(12px,1.1vw,16px);
            color: #fff;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            max-width: 600px;
        }

        #CenterLoadingBlock {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            z-index: 20;
            width: 300vw;
            max-width: 60%;
            min-width: 260px;
            text-align: center;
            color: #fff;
        }

        #ProcessName {
            font-size: clamp(20px,1.3vw,18px);
            letter-spacing: .2em;
            text-transform: uppercase;
            margin-bottom: 2vh;
            text-shadow: 0 0 6px rgba(0,0,0,.8);
        }

        #ProcessBar {
            width: 100%;
            height: 20px;
            border-radius: 8px;
            background: rgba(255,255,255,.12);
            overflow: hidden;
            box-shadow: 0 0 5px rgba(0,0,0,.7);
        }

        #ProcessBarFill {
            width: 0%;
            height: 100%;
            border-radius: inherit;
            background: linear-gradient(95deg, rgba(148, 139, 254, 1) 0%, rgba(148, 139, 254, 1) 70%, rgba(148, 139, 254, 1), 100%);
            transition: none;
        }

        #AddonCount {
            font-size: clamp(12px,1.1vw,14px);
            color: rgba(255,255,255,0.7);
            margin-top: 0.5vh;
        }

        @keyframes GlowLogo {
            from { filter: drop-shadow(0 0 10px rgba(171, 163, 255, 1)); }
            to { filter: drop-shadow(0 0 0px rgba(33,45,44,0)); }
        }

        @keyframes SlideRightTitle {
            from { transform: translateX(-100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes SlideLeftLogo {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="VideoContainer">
        <video id="BackgroundVideo" src="Video/Background.mp4" autoplay muted loop playsinline preload="auto"></video>
        <div id="DarkenedVideo"></div>
        <img id="UpperImage" src="img/kamiko_upper.png">
        
        <div id="HeaderBlock">
            <img id="LogoImage" src="img/logo.png">
        </div>
        
        <div id="FooterBlock">
            <div id="HintTitle">–ò–ù–¢–ï–†–ï–°–ù–´–ï –§–ê–ö–¢–´</div>
            <div id="HintText">–ù–µ–∫–∏–π –¢–∞–º–µ—Ä–ª–∞–Ω-–ö—É–∫–∏ –ø—Ä–æ–Ω–∏–∫ –≤ –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä...</div>
        </div>

        <div id="CenterLoadingBlock">
            <div id="ProcessName">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏...</div>
            <div id="ProcessBar">
                <div id="ProcessBarFill"></div>
            </div>
        </div>

        <audio id="BackgroundMusicAudio" src="sounds/backmusic.mp3" autoplay loop style="display:none"></audio>
    </div>

    <script>
        const HintCollectionArray = [
            "–í–°–ï –ù–ê–®–ò –†–ê–ë–û–¢–ù–ò–ö–ò –û–¢–ö–†–´–¢–´ –ö –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø–ú –û –†–ê–ë–û–¢–ï, –ù–ï –ë–û–ô–¢–ï–°–¨ –û–ë–†–ê–©–ê–¢–¨–°–Ø –ö –ö–û–ú–£-–¢–û –í –õ–ò–ß–ù–´–ï –°–û–û–ë–©–ï–ù–ò–Ø.",
            "–ù–ê–°–¢–£–ü–ê–ï–¢ –ù–ï–ö–ê–Ø –ù–û–í–ê–Ø –≠–†–ê –ù–ê –ù–ê–®–ï–ú –ü–†–û–ï–ö–¢–ï, –ú–´ –û–ß–ï–ù–¨ –†–ê–î–´ –õ–Æ–ë–û–ô –ü–û–î–î–ï–†–ñ–ö–ï.",
            "–ò–ù–û–ì–î–ê –ù–ê–ú –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–û –ù–ï –•–í–ê–¢–ê–ï–¢ –†–£–ö, –ï–°–õ–ò –í–´ –û–ë–õ–ê–î–ê–ï–¢–ï –ù–ê–í–´–ö–ê–ú–ò –í –õ–Æ–ë–û–ô –ò–ó –°–§–ï–†, –¢–û –ü–ò–®–ò–¢–ï :^",
            "–ú–´ –£–í–ê–ñ–ê–ï–ú –ù–ê–®–ò–• –ò–ì–†–û–ö–û–í, –†–ê–î–´ –ß–¢–û –û–ù–ò –û–°–¢–ê–Æ–¢–°–Ø –î–ê–ñ–ï –í –ü–õ–û–•–ò–ï –í–†–ï–ú–ï–ù–ê.",
            "–ü–†–û–ï–ö–¢ –ü–ï–†–ï–î –û–¢–ö–†–´–¢–ò–ï–ú –†–ê–ó–†–ê–ë–ê–¢–´–í–ê–õ–°–Ø –û–ö–û–õ–û 6 –ú–ï–°–Ø–¶–ï–í, –ü–û–≠–¢–û–ú–£ –ë–ê–ì–ò - –ù–ï –†–ï–î–ö–û–°–¢–¨.",
            "–ú–´ –ü–õ–ê–ù–ò–†–£–ï–ú –î–û–ë–ê–í–õ–Ø–¢–¨ –ì–û–†–ê–ó–î–û –ë–û–õ–¨–®–ï –ù–û–í–´–• –§–ò–®–ï–ö, –ù–ï–ñ–ï–õ–ò –ß–ï–ú –ï–°–¢–¨ –°–ï–ô–ß–ê–°.",
            "–ö–ê–ñ–î–´–ô –î–ï–ù–¨ –ú–´ –ü–†–û–°–´–ü–ê–ï–ú–°–Ø –° –ú–´–°–õ–¨–Æ –û –ú–ú–û –†–ü–ì üòé",
            "–°–ï–†–í–ï–† –ó–ê–¢–û–ß–ï–ù –ù–ê –ü–†–û–¢–ò–í–û–°–¢–û–Ø–ù–ò–ï –ù–ï–°–ö–û–õ–¨–ö–ò–• –§–†–ê–ö–¶–ò–ô, –ü–û–≠–¢–û–ú–£ –í–´ –í–°–ï–ì–î–ê –°–ú–û–ñ–ï–¢–ï –ù–ê–ô–¢–ò –°–ï–ë–ï –ü–†–û–¢–ò–í–ù–ò–ö–ê. –ë–ò–¢–í–´ –ù–ê –ì–ê–õ–¨–ö–ï - –ù–ï–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´).",
            "–ò–ó–ù–ê–ß–ê–õ–¨–ù–´–ú –°–û–°–¢–ê–í–û–ú –°–ï–†–í–ï–†–ê –ë–´–õ–ò –í–°–ï–ì–û 2 –ß–ï–õ–û–í–ï–ö–ê. –≠–¢–û –í–ï–õ–ò–ö–ò–ô –î–ò–ó–ê–ô–ù–ï–† –ò –ú–ï–õ–ß–ê–ô–®–ò–ô –ù–ê –¢–û –í–†–ï–ú–Ø –ö–û–î–ï–†.",
            '–ú–´ –ü–õ–ê–ù–ò–†–£–ï–ú –†–ê–°–®–ò–†–Ø–¢–¨ –ù–ê–®–£ "–§–†–ê–ù–®–ò–ó–£", –ñ–î–ò–¢–ï –ë–û–õ–¨–®–ï –ü–†–û–ï–ö–¢–û–í –ü–û –†–ê–ó–ù–´–ú –¢–ï–ú–ê–¢–ò–ö–ê–ú'
        ];

        let HintTypingIntervalIdentifierValue = null, FilesTotalAmountValue = 0, FilesNeededAmountValue = 0, CurrentAddonName = "";
        let HintIndexValue = -1, UsedHintsSet = new Set();

        function GetNextUniqueHintIndexValue() {
            if (UsedHintsSet.size === HintCollectionArray.length) {
                UsedHintsSet.clear();
            }
            do {
                HintIndexValue = (HintIndexValue + 1 + Math.floor(Math.random() * HintCollectionArray.length)) % HintCollectionArray.length;
            } while (UsedHintsSet.has(HintIndexValue));
            UsedHintsSet.add(HintIndexValue);
            return HintIndexValue;
        }

        function StartHintTypingText(NewHintTextValue) {
            const HintTextElement = document.getElementById("HintText");
            if (!HintTextElement || !NewHintTextValue) return;
            if (HintTypingIntervalIdentifierValue) {
                clearInterval(HintTypingIntervalIdentifierValue);
                HintTypingIntervalIdentifierValue = null;
            }
            HintTextElement.textContent = "";
            HintTextElement.style.opacity = "0.5";
            let CurrentCharIndexValue = 0;
            HintTypingIntervalIdentifierValue = setInterval(() => {
                if (CurrentCharIndexValue >= NewHintTextValue.length) {
                    clearInterval(HintTypingIntervalIdentifierValue);
                    HintTypingIntervalIdentifierValue = null;
                    return;
                }
                HintTextElement.textContent += NewHintTextValue.charAt(CurrentCharIndexValue++);
            },25);
        }

        function UpdateLoadingProgressLine() {
            const ProcessBarFillElement = document.getElementById("ProcessBarFill");
            const ProcessNameElement = document.getElementById("ProcessName");
            const AddonCountElement = document.getElementById("AddonCount");
            if (!ProcessBarFillElement || !ProcessNameElement || !AddonCountElement) return;

            let progress = 0;
            if (FilesTotalAmountValue > 0 && FilesNeededAmountValue >= 0) {
                progress = 1 - (FilesNeededAmountValue / FilesTotalAmountValue);
            }
            const progressPercent = Math.round(Math.max(0, Math.min(1, progress)) * 100);
            ProcessBarFillElement.style.width = progressPercent + "%";
            
            ProcessNameElement.textContent = CurrentAddonName ? `–ó–∞–≥—Ä—É–∑–∫–∞: ${CurrentAddonName}` : "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏...";
            AddonCountElement.textContent = `${progressPercent}%`;
        }

        window.SetFilesTotal = (TotalAmountValue) => {
            FilesTotalAmountValue = Math.max(1, parseInt(TotalAmountValue) || 1);
            UpdateLoadingProgressLine();
        };

        window.SetFilesNeeded = (NeededAmountValue) => {
            FilesNeededAmountValue = parseInt(NeededAmountValue) || 0;
            UpdateLoadingProgressLine();
        };

        window.SetAddonDownload = (addonName, totalBytes, downloadedBytes) => {
            CurrentAddonName = addonName || "";
            const total = Math.max(1, parseInt(totalBytes) || 1);
            const downloaded = parseInt(downloadedBytes) || 0;
            FilesTotalAmountValue = total;
            FilesNeededAmountValue = Math.max(0, total - downloaded);
            UpdateLoadingProgressLine();
        };

        window.SetStatusChanged = (StatusTextValue) => {
            CurrentAddonName = "";
            const ProcessNameElement = document.getElementById("ProcessName");
            if (ProcessNameElement) ProcessNameElement.textContent = StatusTextValue;
            const ProcessBarFillElement = document.getElementById("ProcessBarFill");
            if (ProcessBarFillElement) ProcessBarFillElement.style.width = "0%";
        };

        window.onload = () => {
            const BackgroundVideoElement = document.getElementById("BackgroundVideo");
            BackgroundVideoElement.play().catch(() => {});
            
            StartHintTypingText(HintCollectionArray[GetNextUniqueHintIndexValue()]);
            
            setInterval(() => {
                StartHintTypingText(HintCollectionArray[GetNextUniqueHintIndexValue()]);
            }, 4500);
        };
    </script>
</body>
</html>



